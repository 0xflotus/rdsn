config:{0,-,[]}
state:{{r1,ina,0,0}}
config:{1,r1,[]}

# the message loss of update_cfg reply will lead to resend of the msg
inject:on_rpc_reply:rpc_name=rpc_cm_update_partition_configuration_ack,from=m,to=r1
inject:on_rpc_call:rpc_name=rpc_cm_update_partition_configuration,from=r1,to=m
inject:on_rpc_call:rpc_name=rpc_cm_update_partition_configuration,from=r1,to=m
inject:on_rpc_call:rpc_name=rpc_cm_update_partition_configuration,from=r1,to=m
inject:on_rpc_call:rpc_name=rpc_cm_update_partition_configuration,from=r1,to=m
inject:on_rpc_call:rpc_name=rpc_cm_update_partition_configuration,from=r1,to=m
inject:on_rpc_call:rpc_name=rpc_cm_update_partition_configuration,from=r1,to=m

# then r1 will be the primary
state:{{r1,pri,1,0}}

# and at last the state will be normal
config:{3,r1,[r2,r3]}

